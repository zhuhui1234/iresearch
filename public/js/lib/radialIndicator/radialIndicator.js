/*! iResearchView-1.0.0-2016-08-15 */
/*
    radialIndicator.js v 1.0.0
    Author: Sudhanshu Yadav
    Copyright (c) 2015 Sudhanshu Yadav - ignitersworld.com , released under the MIT license.
    Demo on: ignitersworld.com/lab/radialIndicator.html
*/
!function(a,b,c){"use strict";function d(a){var b=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;a=a.replace(b,function(a,b,c,d){return b+b+c+c+d+d});var c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return c?[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]:null}function e(a,b,c,d){return Math.round(c+(d-c)*a/b)}function f(a,b,c,f,g){var h=-1!=g.indexOf("#")?d(g):g.match(/\d+/g),i=-1!=f.indexOf("#")?d(f):f.match(/\d+/g),j=c-b,k=a-b;return h&&i?"rgb("+e(k,j,i[0],h[0])+","+e(k,j,i[1],h[1])+","+e(k,j,i[2],h[2])+")":null}function g(){for(var a=arguments,b=a[0],c=1,d=a.length;d>c;c++){var e=a[c];for(var f in e)e.hasOwnProperty(f)&&(b[f]=e[f])}return b}function h(a){return function(b){if(!a)return b.toString();b=b||0;for(var c=b.toString().split("").reverse(),d=a.split("").reverse(),e=0,f=0,g=d.length;g>e&&c.length;e++)"#"==d[e]&&(f=e,d[e]=c.shift());return d.splice(f+1,d.lastIndexOf("#")-f,c.reverse().join("")),d.reverse().join("")}}function i(a,b){b=b||{},b=g({},j.defaults,b),this.indOption=b,"string"==typeof a&&(a=c.querySelector(a)),a.length&&(a=a[0]),this.container=a;var d=c.createElement("canvas");a.appendChild(d),this.canElm=d,this.ctx=d.getContext("2d"),this.current_value=b.initValue||b.minValue||0}function j(a,b){var c=new i(a,b);return c.init(),c}var k=2*Math.PI,l=Math.PI/2;i.prototype={constructor:j,init:function(){var a=this.indOption,b=this.canElm,c=this.ctx,d=2*(a.radius+a.barWidth),e=d/2;return this.formatter="function"==typeof a.format?a.format:h(a.format),this.maxLength=a.percentage?4:this.formatter(a.maxValue).length,b.width=d,b.height=d,c.strokeStyle=a.barBgColor,c.lineWidth=a.barWidth,c.beginPath(),c.arc(e,e,a.radius,0,2*Math.PI),c.stroke(),this.imgData=c.getImageData(0,0,d,d),this.value(this.current_value),this},value:function(a){if(void 0===a||isNaN(a))return this.current_value;a=parseInt(a);var b=this.ctx,c=this.indOption,d=c.barColor,e=2*(c.radius+c.barWidth),g=c.minValue,h=c.maxValue,i=e/2;a=g>a?g:a>h?h:a;var j=Math.round(100*(a-g)/(h-g)*100)/100,m=c.percentage?j+"%":this.formatter(a);if(this.current_value=a,b.putImageData(this.imgData,0,0),"object"==typeof d)for(var n=Object.keys(d),o=1,p=n.length;p>o;o++){var q=n[o-1],r=n[o],s=d[q],t=d[r],u=a==q?s:a==r?t:a>q&&r>a&&(c.interpolate?f(a,q,r,s,t):t);if(0!=u){d=u;break}}if(b.strokeStyle=d,c.roundCorner&&(b.lineCap="round"),b.beginPath(),b.arc(i,i,c.radius,-l,k*j/100-l,!1),b.stroke(),c.displayNumber){var v=b.font.split(" "),w=c.fontWeight,x=c.fontSize||e/(this.maxLength-(Math.floor(1.4*this.maxLength/4)-1));v=c.fontFamily||v[v.length-1],b.fillStyle=c.fontColor||d,b.font=w+" "+x+"px "+v,b.textAlign="center",b.textBaseline="middle",b.fillText(m,i,i)}return this},animate:function(a){var b=this.indOption,c=this.current_value||b.minValue,d=this,e=Math.ceil((b.maxValue-b.minValue)/(b.frameNum||(b.percentage?100:500))),f=c>a;return this.intvFunc&&clearInterval(this.intvFunc),this.intvFunc=setInterval(function(){if(!f&&c>=a||f&&a>=c){if(d.current_value==c)return void clearInterval(d.intvFunc);c=a}d.value(c),c!=a&&(c+=f?-e:e)},b.frameTime),this},option:function(a,b){return void 0===b?this.option[a]:(-1!=["radius","barWidth","barBgColor","format","maxValue","percentage"].indexOf(a)&&(this.indOption[a]=b,this.init().value(this.current_value)),void(this.indOption[a]=b))}},j.defaults={radius:50,barWidth:5,barBgColor:"#eeeeee",barColor:"#99CC33",format:null,frameTime:10,frameNum:null,fontColor:null,fontFamily:null,fontWeight:"bold",fontSize:null,interpolate:!0,percentage:!1,displayNumber:!0,roundCorner:!1,minValue:0,maxValue:100,initValue:0},b.radialIndicator=j,a&&(a.fn.radialIndicator=function(b){return this.each(function(){var c=j(this,b);a.data(this,"radialIndicator",c)})})}(window.jQuery,window,document,void 0);